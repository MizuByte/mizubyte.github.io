/* Card flip structure */
.card-inner {
  transition: transform 0.6s;
  transform-style: preserve-3d;
  position: relative;
  width: 100%;
  height: 100%;
}
.card.flipped .card-inner {
  transform: rotateY(180deg);
}
.card-front, .card-back {
  backface-visibility: hidden;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}
.card-back {
  transform: rotateY(180deg);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: rgba(30,30,30,0.95);
  border-radius: 0.8em;
  box-shadow: 0 2px 16px var(--color-shadow);
}
.filter-btn {
  font-size: 1.2em;
  margin: 10px;
  padding: 12px 24px;
  border-radius: 8px;
  background: var(--color-btn-bg);
  color: var(--color-text-main);
  box-shadow: 0 2px 8px var(--color-shadow);
  cursor: pointer;
  border: none;
  transition: background 0.2s, box-shadow 0.2s;
  font-family: "Source Code Pro", monospace;
  letter-spacing: 0.04em;
}
.filter-btn.selected {
  background: var(--color-btn-bg-hover);
  box-shadow: 0 0 16px 4px #91ff00;
}
@property --x {
  syntax: '<number>';
  initial-value: 0;
  inherits: true;
}

@property --y {
  syntax: '<number>';
  initial-value: 0;
  inherits: true;
}

@layer reset {
  * { margin: 0; }
  svg, img { display: block; }
}

.visually-hidden {
  position: fixed;
  top: -999vh;
  left: -999vw;
  pointer-events: none;
}

.cards-grid {
  display: grid;
    grid: auto-flow / repeat(auto-fit, 250px);
    gap: 130px;
    place-items: center;
    place-content: center;
    height: 100vh;
    background: 
      radial-gradient(#424242 0 1px, #0000 1px 10px) 0 / 1em 1em,
      linear-gradient(#eeeded, #e0e0e0);
}


.cards-grid .card {
  width: 300px;
  aspect-ratio: 5/7;
  perspective: 1200px;
  transform-style: preserve-3d;
  overflow: visible;
}

.cards-grid .card.greyed {
  opacity: 0.45;
}

 .cards-grid figure {
  --atan: calc(-1 * atan2(var(--x), var(--y)));
  
  position: relative;
  height: 100%;
  border-radius: 0em;
  border: 4px solid;
  border-image: linear-gradient(315deg, #91ff00 0%, #ffffff 40%, #9320ff 60%, #ffffff 100%) 1;
  transform: rotateX(calc(var(--x) * 1deg)) rotateY(calc(var(--y) * 1deg));
  overflow: hidden;
  will-change: transform;
  transition: 
    --x 400ms ease,
    --y 400ms ease;
  
  &:hover {
    transition-duration: 0s;
    
    &::after {
      opacity: 1;
    }
  }
  
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: url('https://images.unsplash.com/photo-1615715874901-ad6a07ec5c88?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE3NTQ0MjE2ODd8&ixlib=rb-4.1.0&q=85') center / cover;
    mask-image: conic-gradient(from var(--atan), #0000, rgba(255, 255, 255, 0.667), #0000, rgba(255, 255, 255, 0.667), #0000);
    backdrop-filter: url(#filterEdges);
    opacity: 0;
    mix-blend-mode: plus-lighter;
    transition: opacity 200ms;
  }

  display: block;
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  
}
.cards-grid figure img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.cards-grid .card.greyed figure {
  border-image: linear-gradient(135deg, #ff006a 0%, #000000 25%,#ff006a 50%, #00093b 75%, #ff006a 100%) 1;
}

.cards-grid .card-figure-text {
  font-family: "Source Code Pro", monospace;
  font-size: 2.1em;
  letter-spacing: 0.04em;
  color: #fff;
  text-shadow:
    0 2px 8px #000,
    0 0px 10px #470a1e,
    0 0px 12px #3f0618,
    0 0px 2px #000,
    0 0px 4px #000;
  filter: drop-shadow(0 0 8px #3d0a1a) drop-shadow(0 0 2px #000);
  text-align: center;
  margin-bottom: 0.2em;
  margin-top: auto;
  z-index: 1000;
  position: absolute;
  left: 50%;
  bottom: 0.3em;
  transform: translateX(-50%);
  width: 90%;
    pointer-events: none;
}